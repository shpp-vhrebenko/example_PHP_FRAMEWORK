<?php//// Конттроллер страниц.//class C_Page extends C_Base{	//	// Конструктор.	//	public function __construct(){		parent::__construct();	}		public function before(){		//$this->needLogin = true; // раскоментируйте, чтобы закрыть доступ ко всем страницам данного контроллера		parent::before();	}		public function action_index(){		$this->title .= '::Чтение';		// Определяем по URL /page/index/1 какую страницу открыть		$id = isset($this->params[0]) ? (int)$this->params[0] : 1;		$mPages = M_Pages::Instance();		$text = $mPages->text_get($id);		$this->content = $this->Template('v/v_index.php', array('text' => $text, 																'id' => $id,																'can_edit' => M_Users::Instance()->Can('EDIT_PAGES')));		}		public function action_edit(){		if(!M_Users::Instance()->Can('EDIT_PAGES'))			$this->redirect('/auth/login');				$this->title .= '::Редактирование';		$id = isset($this->params[0]) ? (int)$this->params[0] : 1;		$mPages = M_Pages::Instance();				if($this->isPost())		{			$mPages->text_set($_POST['text'], $id);			$this->redirect("/page/index/$id");		}				$text = $mPages->text_get($id);		$this->content = $this->Template('v/v_edit.php', array('text' => $text));			}}